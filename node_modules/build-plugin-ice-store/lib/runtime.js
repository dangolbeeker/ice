"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// @ts-ignore
var _store_1 = require("$store");
exports.default = (function (_a) {
    var addProvider = _a.addProvider, appConfig = _a.appConfig, _b = _a.context, _c = _b.initialData, initialData = _c === void 0 ? {} : _c, createElement = _b.createElement;
    var StoreProvider = function (_a) {
        var children = _a.children;
        var storeConfig = appConfig.store || {};
        var initialStates = {};
        if (storeConfig.getInitialStates) {
            // @deprecated
            console.warn('Detected that you are using store.getInitialStates, please use app.getInitialData method, Visit https://ice.work/docs/guide/basic/store.');
            initialStates = storeConfig.getInitialStates(initialData);
        }
        else if (initialData.initialStates) {
            initialStates = initialData.initialStates;
        }
        else if (storeConfig.initialStates) {
            initialStates = storeConfig.initialStates;
        }
        return createElement(_store_1.default.Provider, {
            initialStates: initialStates,
            children: children
        });
    };
    if (_store_1.default && _store_1.default.Provider) {
        addProvider(StoreProvider);
    }
});
