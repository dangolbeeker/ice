{"version":3,"file":"driver-kraken.mjs","sources":["../../style-unit/node_modules/universal-env/lib/index.js","../../style-unit/lib/index.js","../src/index.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.isQuickApp = exports.isWeChatMiniProgram = exports.isByteDanceMicroApp = exports.isMiniApp = exports.isKraken = exports.isWeex = exports.isNode = exports.isWeb = void 0;\n\nfunction isUndef(type) {\n  return type === 'undefined';\n}\n\nvar isWeb = !isUndef(typeof window) && 'onload' in window;\nexports.isWeb = isWeb;\nvar isNode = !isUndef(typeof process) && !!(process.versions && process.versions.node);\nexports.isNode = isNode;\nvar isWeex = !isUndef(typeof WXEnvironment) && WXEnvironment.platform !== 'Web';\nexports.isWeex = isWeex;\nvar isKraken = !isUndef(typeof __kraken__);\nexports.isKraken = isKraken;\nvar isMiniApp = !isUndef(typeof my) && my !== null && !isUndef(typeof my.alert);\nexports.isMiniApp = isMiniApp;\nvar isByteDanceMicroApp = !isUndef(typeof tt) && tt !== null && !isUndef(typeof tt) && !isUndef(tt.showToast); // In wechat mini program, wx.login is a function\n// In wechat mini propgram webview, there is no wx.login, but exist wx.miniProgram\n// In bytedance maicro app, there is wx variable.\n\nexports.isByteDanceMicroApp = isByteDanceMicroApp;\nvar isWeChatMiniProgram = !isByteDanceMicroApp && !isUndef(typeof wx) && wx !== null && (!isUndef(typeof wx.login) || !isUndef(typeof wx.miniProgram));\nexports.isWeChatMiniProgram = isWeChatMiniProgram;\nvar isQuickApp = !isUndef(typeof global) && global !== null && !isUndef(typeof global.callNative) && !isWeex;\nexports.isQuickApp = isQuickApp;","\"use strict\";\n\nexports.__esModule = true;\nexports.isRpx = isRpx;\nexports.calcRpx = calcRpx;\nexports.getRpx = getRpx;\nexports.setRpx = setRpx;\nexports.getViewportWidth = getViewportWidth;\nexports.setViewportWidth = setViewportWidth;\nexports.setDecimalPixelTransformer = setDecimalPixelTransformer;\nexports.setUnitPrecision = setUnitPrecision;\nexports.cached = cached;\nexports.setTargetPlatform = setTargetPlatform;\nexports.convertUnit = void 0;\n\nvar _universalEnv = require(\"universal-env\");\n\nvar RPX_REG = /\"[^\"]+\"|'[^']+'|url\\([^\\)]+\\)|(\\d*\\.?\\d+)rpx/g;\n\nvar __rpx_coefficient__;\n\nvar __viewport_width__; // convertUnit method targetPlatform\n\n\nvar targetPlatform = _universalEnv.isWeb ? 'web' : _universalEnv.isWeex ? 'weex' : ''; // Init toFixed method\n\nvar unitPrecision = 4;\n\nvar toFixed = function toFixed(number, precision) {\n  var multiplier = Math.pow(10, precision + 1);\n  var wholeNumber = Math.floor(number * multiplier);\n  return Math.round(wholeNumber / 10) * 10 / multiplier;\n}; // Dedault decimal px transformer.\n\n\nvar decimalPixelTransformer = function decimalPixelTransformer(rpx, $1) {\n  return $1 ? parseFloat(rpx) * getRpx() + 'px' : rpx;\n}; // Default decimal vw transformer.\n\n\nvar decimalVWTransformer = function decimalVWTransformer(rpx, $1) {\n  return $1 ? toFixed(parseFloat(rpx) / (getViewportWidth() / 100), unitPrecision) + 'vw' : rpx;\n}; // Default 1 rpx to 1 px\n\n\nif (getRpx() === undefined) {\n  setRpx(1);\n} // Viewport width, default to 750.\n\n\nif (getViewportWidth() === undefined) {\n  setViewportWidth(750);\n}\n/**\n * Is string contains rpx\n * note: rpx is an alias to rpx\n * @param {String} str\n * @returns {Boolean}\n */\n\n\nfunction isRpx(str) {\n  return typeof str === 'string' && RPX_REG.test(str);\n}\n/**\n * Calculate rpx\n * @param {String} str\n * @returns {String}\n */\n\n\nfunction calcRpx(str) {\n  if (targetPlatform === 'web') {\n    // In Web convert rpx to 'vw', same as driver-dom and driver-universal\n    // '375rpx' => '50vw'\n    return str.replace(RPX_REG, decimalVWTransformer);\n  } else if (targetPlatform === 'weex') {\n    // In Weex convert rpx to 'px'\n    // '375rpx' => 375 * px\n    return str.replace(RPX_REG, decimalPixelTransformer);\n  } else {\n    // Other platform return original value, like Mini-App and WX Mini-Program ...\n    // '375rpx' => '375rpx'\n    return str;\n  }\n}\n\nfunction getRpx() {\n  return __rpx_coefficient__;\n}\n\nfunction setRpx(rpx) {\n  __rpx_coefficient__ = rpx;\n}\n\nfunction getViewportWidth() {\n  return __viewport_width__;\n}\n\nfunction setViewportWidth(viewport) {\n  __viewport_width__ = viewport;\n}\n/**\n * Set a function to transform unit of pixel,\n * default to passthrough.\n * @param {Function} transformer function\n */\n\n\nfunction setDecimalPixelTransformer(transformer) {\n  decimalPixelTransformer = transformer;\n}\n/**\n * Set unit precision.\n * @param n {Number} Unit precision, default to 4.\n */\n\n\nfunction setUnitPrecision(n) {\n  unitPrecision = n;\n}\n/**\n * Create a cached version of a pure function.\n * Use the first params as cache key.\n */\n\n\nfunction cached(fn) {\n  var cache = new Map();\n  return function cachedFn() {\n    var key = arguments.length <= 0 ? undefined : arguments[0];\n    if (!cache.has(key)) cache.set(key, fn.apply(void 0, arguments));\n    return cache.get(key);\n  };\n}\n\nfunction setTargetPlatform(platform) {\n  targetPlatform = platform;\n}\n/**\n * Convert rpx.\n * @param value\n * @param prop\n * @param platform\n * @return {String} Transformed value.\n */\n\n\nvar convertUnit = cached(function (value, prop, platform) {\n  if (platform) {\n    setTargetPlatform(platform);\n  }\n\n  return isRpx(value) ? calcRpx(value) : value;\n});\nexports.convertUnit = convertUnit;","/**\n * Driver for Kraken\n **/\nimport { convertUnit, cached } from 'style-unit';\n\nconst NON_DIMENSIONAL_REG = /opa|ntw|ne[ch]|ex(?:s|g|n|p|$)|^ord|zoo|grid|orp|ows|mnc|^columns$|bs|erim|onit/i;\nconst EVENT_PREFIX_REG = /^on[A-Z]/;\nconst DANGEROUSLY_SET_INNER_HTML = 'dangerouslySetInnerHTML';\nconst CLASS_NAME = 'className';\nconst CLASS = 'class';\nconst STYLE = 'style';\nconst CHILDREN = 'children';\nconst TEXT_CONTENT_ATTR = 'textContent';\nconst CREATE_ELEMENT = 'createElement';\nconst CREATE_COMMENT = 'createComment';\nconst CREATE_TEXT_NODE = 'createTextNode';\nconst SET_ATTRIBUTE = 'setAttribute';\nconst REMOVE_ATTRIBUTE = 'removeAttribute';\nconst EMPTY = '';\n\nconst isEventProp = cached(prop => EVENT_PREFIX_REG.test(prop));\n\nexport function createBody() {\n  return document.body;\n}\n\nexport function createEmpty(component) {\n  return document[CREATE_COMMENT](EMPTY);\n}\n\nexport function createText(text, component) {\n  return document[CREATE_TEXT_NODE](text);\n}\n\nexport function updateText(node, text) {\n  node[TEXT_CONTENT_ATTR] = text;\n}\n\nexport function createElement(type, props, component, __shouldConvertUnitlessToRpx) {\n  const node = document[CREATE_ELEMENT](type);\n\n  for (let prop in props) {\n    const value = props[prop];\n    if (prop === CHILDREN) continue;\n\n    if (value != null) {\n      if (prop === STYLE) {\n        setStyle(node, value, __shouldConvertUnitlessToRpx);\n      } else if (isEventProp(prop)) {\n        addEventListener(node, prop.slice(2).toLowerCase(), value, component);\n      } else {\n        setAttribute(node, prop, value);\n      }\n    }\n  }\n\n  return node;\n}\n\nexport function appendChild(node, parent) {\n  return parent.appendChild(node);\n}\n\nexport function removeChild(node, parent) {\n  parent = parent || node.parentNode;\n  // Maybe has been removed when remove child\n  if (parent) {\n    parent.removeChild(node);\n  }\n}\n\nexport function replaceChild(newChild, oldChild, parent) {\n  parent = parent || oldChild.parentNode;\n  parent.replaceChild(newChild, oldChild);\n}\n\nexport function insertAfter(node, after, parent) {\n  parent = parent || after.parentNode;\n  const nextSibling = after.nextSibling;\n  if (nextSibling) {\n    // Performance improve when node has been existed before nextSibling\n    if (nextSibling !== node) {\n      insertBefore(node, nextSibling, parent);\n    }\n  } else {\n    appendChild(node, parent);\n  }\n}\n\nexport function insertBefore(node, before, parent) {\n  parent = parent || before.parentNode;\n  parent.insertBefore(node, before);\n}\n\nexport function addEventListener(node, eventName, eventHandler) {\n  return node.addEventListener(eventName, eventHandler);\n}\n\nexport function removeEventListener(node, eventName, eventHandler) {\n  return node.removeEventListener(eventName, eventHandler);\n}\n\nexport function removeAttribute(node, propKey) {\n  if (propKey === DANGEROUSLY_SET_INNER_HTML) return;\n\n  if (propKey === CLASS_NAME) propKey = CLASS;\n\n  if (propKey in node) {\n    try {\n      // Some node property is readonly when in strict mode\n      node[propKey] = null;\n    } catch (e) { }\n  }\n\n  node[REMOVE_ATTRIBUTE](propKey);\n}\n\nexport function setAttribute(node, propKey, propValue) {\n  // For reduce innerHTML operation to improve performance.\n  if (propKey === DANGEROUSLY_SET_INNER_HTML) {\n    warnUnsupport(DANGEROUSLY_SET_INNER_HTML);\n    return;\n  }\n\n  if (propKey === CLASS_NAME) propKey = CLASS;\n\n  if (propKey in node) {\n    try {\n      // Some node property is readonly when in strict mode\n      node[propKey] = propValue;\n    } catch (e) {\n      node[SET_ATTRIBUTE](propKey, propValue);\n    }\n  } else {\n    node[SET_ATTRIBUTE](propKey, propValue);\n  }\n}\n\nconst isDimensionalProp = cached(prop => !NON_DIMENSIONAL_REG.test(prop));\n\nexport function setStyle(node, style, __shouldConvertUnitlessToRpx) {\n  for (let prop in style) {\n    const value = style[prop];\n    let convertedValue;\n    if (typeof value === 'number' && isDimensionalProp(prop)) {\n      if (__shouldConvertUnitlessToRpx) {\n        convertedValue = value + 'rpx';\n        // Transfrom rpx to vw\n        convertedValue = convertUnit(convertedValue, prop);\n      } else {\n        convertedValue = value + 'px';\n      }\n    } else {\n      convertedValue = convertUnit(value, prop);\n    }\n\n    // Support CSS custom properties (variables) like { --main-color: \"black\" }\n    if (prop[0] === '-' && prop[1] === '-') {\n      // reference: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/setProperty.\n      // style.setProperty do not support Camel-Case style properties.\n      node.style.setProperty(prop, convertedValue);\n    } else {\n      node.style[prop] = convertedValue;\n    }\n  }\n}\n\nfunction warnUnsupport(message) {\n  console.warn(`[DriverKraken]: ${message} is not supported.`);\n}\n"],"names":["exports","isUndef","type","isWeb","window","isNode","process","versions","node","isWeex","WXEnvironment","platform","isKraken","__kraken__","isMiniApp","my","alert","isByteDanceMicroApp","tt","showToast","isWeChatMiniProgram","wx","login","miniProgram","isQuickApp","global","callNative","isRpx","calcRpx","getRpx","setRpx","getViewportWidth","setViewportWidth","setDecimalPixelTransformer","setUnitPrecision","cached","setTargetPlatform","RPX_REG","__rpx_coefficient__","__viewport_width__","targetPlatform","_universalEnv","unitPrecision","toFixed","number","precision","multiplier","Math","pow","wholeNumber","floor","round","decimalPixelTransformer","rpx","$1","parseFloat","decimalVWTransformer","undefined","str","test","replace","viewport","transformer","n","fn","cache","Map","cachedFn","key","arguments","length","has","set","apply","get","convertUnit","value","prop","NON_DIMENSIONAL_REG","EVENT_PREFIX_REG","DANGEROUSLY_SET_INNER_HTML","CLASS_NAME","CLASS","STYLE","CHILDREN","TEXT_CONTENT_ATTR","CREATE_ELEMENT","CREATE_COMMENT","CREATE_TEXT_NODE","SET_ATTRIBUTE","REMOVE_ATTRIBUTE","EMPTY","isEventProp","createBody","document","body","createEmpty","component","createText","text","updateText","createElement","props","__shouldConvertUnitlessToRpx","setStyle","addEventListener","slice","toLowerCase","setAttribute","appendChild","parent","removeChild","parentNode","replaceChild","newChild","oldChild","insertAfter","after","nextSibling","insertBefore","before","eventName","eventHandler","removeEventListener","removeAttribute","propKey","e","propValue","warnUnsupport","isDimensionalProp","style","convertedValue","setProperty","message","console","warn"],"mappings":"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"}