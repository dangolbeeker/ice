"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var globby = require("globby");
var getSourceDir_1 = require("../utils/getSourceDir");
var constant_1 = require("../constant");
exports.default = (function (api) {
    var context = api.context, setValue = api.setValue;
    var rootDir = context.rootDir, userConfig = context.userConfig;
    var srcDir = userConfig.sourceDir || getSourceDir_1.default(userConfig.entry);
    var tsEntryFiles = globby.sync([srcDir + "/app.@(ts?(x))", srcDir + "/pages/*/app.@(ts?(x))"], {
        cwd: rootDir
    });
    var projectType = tsEntryFiles.length ? 'ts' : 'js';
    setValue(constant_1.PROJECT_TYPE, projectType);
});
