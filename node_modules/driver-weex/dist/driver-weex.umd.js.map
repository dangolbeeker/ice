{"version":3,"file":"driver-weex.umd.js","sources":["../../style-unit/node_modules/universal-env/lib/index.js","../../style-unit/lib/index.js","../src/index.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.isQuickApp = exports.isWeChatMiniProgram = exports.isByteDanceMicroApp = exports.isMiniApp = exports.isKraken = exports.isWeex = exports.isNode = exports.isWeb = void 0;\n\nfunction isUndef(type) {\n  return type === 'undefined';\n}\n\nvar isWeb = !isUndef(typeof window) && 'onload' in window;\nexports.isWeb = isWeb;\nvar isNode = !isUndef(typeof process) && !!(process.versions && process.versions.node);\nexports.isNode = isNode;\nvar isWeex = !isUndef(typeof WXEnvironment) && WXEnvironment.platform !== 'Web';\nexports.isWeex = isWeex;\nvar isKraken = !isUndef(typeof __kraken__);\nexports.isKraken = isKraken;\nvar isMiniApp = !isUndef(typeof my) && my !== null && !isUndef(typeof my.alert);\nexports.isMiniApp = isMiniApp;\nvar isByteDanceMicroApp = !isUndef(typeof tt) && tt !== null && !isUndef(typeof tt) && !isUndef(tt.showToast); // In wechat mini program, wx.login is a function\n// In wechat mini propgram webview, there is no wx.login, but exist wx.miniProgram\n// In bytedance maicro app, there is wx variable.\n\nexports.isByteDanceMicroApp = isByteDanceMicroApp;\nvar isWeChatMiniProgram = !isByteDanceMicroApp && !isUndef(typeof wx) && wx !== null && (!isUndef(typeof wx.login) || !isUndef(typeof wx.miniProgram));\nexports.isWeChatMiniProgram = isWeChatMiniProgram;\nvar isQuickApp = !isUndef(typeof global) && global !== null && !isUndef(typeof global.callNative) && !isWeex;\nexports.isQuickApp = isQuickApp;","\"use strict\";\n\nexports.__esModule = true;\nexports.isRpx = isRpx;\nexports.calcRpx = calcRpx;\nexports.getRpx = getRpx;\nexports.setRpx = setRpx;\nexports.getViewportWidth = getViewportWidth;\nexports.setViewportWidth = setViewportWidth;\nexports.setDecimalPixelTransformer = setDecimalPixelTransformer;\nexports.setUnitPrecision = setUnitPrecision;\nexports.cached = cached;\nexports.setTargetPlatform = setTargetPlatform;\nexports.convertUnit = void 0;\n\nvar _universalEnv = require(\"universal-env\");\n\nvar RPX_REG = /\"[^\"]+\"|'[^']+'|url\\([^\\)]+\\)|(\\d*\\.?\\d+)rpx/g;\n\nvar __rpx_coefficient__;\n\nvar __viewport_width__; // convertUnit method targetPlatform\n\n\nvar targetPlatform = _universalEnv.isWeb ? 'web' : _universalEnv.isWeex ? 'weex' : ''; // Init toFixed method\n\nvar unitPrecision = 4;\n\nvar toFixed = function toFixed(number, precision) {\n  var multiplier = Math.pow(10, precision + 1);\n  var wholeNumber = Math.floor(number * multiplier);\n  return Math.round(wholeNumber / 10) * 10 / multiplier;\n}; // Dedault decimal px transformer.\n\n\nvar decimalPixelTransformer = function decimalPixelTransformer(rpx, $1) {\n  return $1 ? parseFloat(rpx) * getRpx() + 'px' : rpx;\n}; // Default decimal vw transformer.\n\n\nvar decimalVWTransformer = function decimalVWTransformer(rpx, $1) {\n  return $1 ? toFixed(parseFloat(rpx) / (getViewportWidth() / 100), unitPrecision) + 'vw' : rpx;\n}; // Default 1 rpx to 1 px\n\n\nif (getRpx() === undefined) {\n  setRpx(1);\n} // Viewport width, default to 750.\n\n\nif (getViewportWidth() === undefined) {\n  setViewportWidth(750);\n}\n/**\n * Is string contains rpx\n * note: rpx is an alias to rpx\n * @param {String} str\n * @returns {Boolean}\n */\n\n\nfunction isRpx(str) {\n  return typeof str === 'string' && RPX_REG.test(str);\n}\n/**\n * Calculate rpx\n * @param {String} str\n * @returns {String}\n */\n\n\nfunction calcRpx(str) {\n  if (targetPlatform === 'web') {\n    // In Web convert rpx to 'vw', same as driver-dom and driver-universal\n    // '375rpx' => '50vw'\n    return str.replace(RPX_REG, decimalVWTransformer);\n  } else if (targetPlatform === 'weex') {\n    // In Weex convert rpx to 'px'\n    // '375rpx' => 375 * px\n    return str.replace(RPX_REG, decimalPixelTransformer);\n  } else {\n    // Other platform return original value, like Mini-App and WX Mini-Program ...\n    // '375rpx' => '375rpx'\n    return str;\n  }\n}\n\nfunction getRpx() {\n  return __rpx_coefficient__;\n}\n\nfunction setRpx(rpx) {\n  __rpx_coefficient__ = rpx;\n}\n\nfunction getViewportWidth() {\n  return __viewport_width__;\n}\n\nfunction setViewportWidth(viewport) {\n  __viewport_width__ = viewport;\n}\n/**\n * Set a function to transform unit of pixel,\n * default to passthrough.\n * @param {Function} transformer function\n */\n\n\nfunction setDecimalPixelTransformer(transformer) {\n  decimalPixelTransformer = transformer;\n}\n/**\n * Set unit precision.\n * @param n {Number} Unit precision, default to 4.\n */\n\n\nfunction setUnitPrecision(n) {\n  unitPrecision = n;\n}\n/**\n * Create a cached version of a pure function.\n * Use the first params as cache key.\n */\n\n\nfunction cached(fn) {\n  var cache = new Map();\n  return function cachedFn() {\n    var key = arguments.length <= 0 ? undefined : arguments[0];\n    if (!cache.has(key)) cache.set(key, fn.apply(void 0, arguments));\n    return cache.get(key);\n  };\n}\n\nfunction setTargetPlatform(platform) {\n  targetPlatform = platform;\n}\n/**\n * Convert rpx.\n * @param value\n * @param prop\n * @param platform\n * @return {String} Transformed value.\n */\n\n\nvar convertUnit = cached(function (value, prop, platform) {\n  if (platform) {\n    setTargetPlatform(platform);\n  }\n\n  return isRpx(value) ? calcRpx(value) : value;\n});\nexports.convertUnit = convertUnit;","import { setRpx, convertUnit } from 'style-unit';\n\nconst STYLE = 'style';\nconst ID = 'id';\nconst TEXT = 'text';\nconst CHILDREN = 'children';\nconst EVENT_PREFIX_REGEXP = /^on[A-Z]/;\nconst ARIA_PREFIX_REGEXP = /^aria-/;\nconst HYPHEN_REGEXP = /\\-(\\w)/;\nconst EMPTY = '';\n\nfunction updateWeexTextValue(node) {\n  const value = node.children.map(function(child) {\n    // Comment node type\n    return child.nodeType === 8 ? child.value : EMPTY;\n  }).join(EMPTY);\n\n  node.setAttr('value', value);\n}\n\nconst nodeMaps = {};\n/* global __weex_document__ */\nconst document = typeof __weex_document__ === 'object' ?\n  __weex_document__ : typeof document === 'object' ?\n    document : null;\n\nexport function getElementById(id) {\n  return nodeMaps[id];\n}\n\nexport function createBody(type, props) {\n  if (document.body) {\n    return document.body;\n  }\n\n  const documentElement = document.documentElement;\n  const body = document.createBody(type, props);\n  documentElement.appendChild(body);\n\n  return body;\n}\n\nexport function createComment(content) {\n  return document.createComment(content);\n}\n\nexport function createEmpty() {\n  return createComment(EMPTY);\n}\n\nexport function createText(text) {\n  // Use comment node type mock text node\n  return createComment(text);\n}\n\nexport function updateText(node, text) {\n  node.value = text;\n  updateWeexTextValue(node.parentNode);\n}\n\nexport function createElement(type, props = {}) {\n  const style = {};\n  const originStyle = props.style;\n  if (originStyle) {\n    for (let prop in originStyle) {\n      style[prop] = convertUnit(originStyle[prop], prop);\n    }\n  }\n\n  const node = document.createElement(type, {\n    style\n  });\n\n  for (let prop in props) {\n    let value = props[prop];\n    if (prop === CHILDREN) {\n      continue;\n    }\n    if (value != null) {\n      if (prop === STYLE) {\n        continue;\n      } else if (EVENT_PREFIX_REGEXP.test(prop)) {\n        let eventName = prop.slice(2).toLowerCase();\n        addEventListener(node, eventName, value, props);\n      } else {\n        setAttribute(node, prop, value);\n      }\n    }\n  }\n\n  return node;\n}\n\nexport function appendChild(node, parent) {\n  parent.appendChild(node);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function removeChild(node, parent) {\n  parent = parent || node.parentNode;\n  let id = node.attr && node.attr[ID];\n  if (id != null) {\n    nodeMaps[id] = null;\n  }\n\n  parent.removeChild(node);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function replaceChild(newChild, oldChild, parent) {\n  parent = parent || oldChild.parentNode;\n  let previousSibling = oldChild.previousSibling;\n  let nextSibling = oldChild.nextSibling;\n  removeChild(oldChild, parent);\n\n  if (previousSibling) {\n    insertAfter(newChild, previousSibling, parent);\n  } else if (nextSibling) {\n    insertBefore(newChild, nextSibling, parent);\n  } else {\n    appendChild(newChild, parent);\n  }\n}\n\nexport function insertAfter(node, after, parent) {\n  parent = parent || after.parentNode;\n  parent.insertAfter(node, after);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function insertBefore(node, before, parent) {\n  parent = parent || before.parentNode;\n  parent.insertBefore(node, before);\n\n  if (parent.type === TEXT) {\n    updateWeexTextValue(parent);\n  }\n}\n\nexport function addEventListener(node, eventName, eventHandler, props) {\n  // https://github.com/apache/incubator-weex/blob/master/runtime/vdom/Element.js#L421\n  let params = props[eventName + 'EventParams'];\n  return node.addEvent(eventName, eventHandler, params);\n}\n\nexport function removeEventListener(node, eventName, eventHandler) {\n  return node.removeEvent(eventName, eventHandler);\n}\n\nexport function removeAttribute(node, propKey, propValue) {\n  if (propKey == ID) {\n    nodeMaps[propValue] = null;\n  }\n  // Weex native will crash when pass null value\n  return node.setAttr(propKey, undefined, false);\n}\n\nexport function setAttribute(node, propKey, propValue) {\n  if (propKey == ID) {\n    nodeMaps[propValue] = node;\n  }\n\n  // Weex only support `ariaLabel` format, convert `aria-label` format to camelcase\n  if (ARIA_PREFIX_REGEXP.test(propKey)) {\n    propKey = propKey.replace(HYPHEN_REGEXP, function(m, p) {\n      return p.toUpperCase();\n    });\n  }\n\n  return node.setAttr(propKey, propValue, false);\n}\n\nexport function setStyle(node, style) {\n  for (let prop in style) {\n    // Translate `rpx` to weex `px`\n    style[prop] = convertUnit(style[prop], prop);\n  }\n  node.setStyles(style);\n}\n\nexport function beforeRender() {\n  // Turn off batched updates\n  document.open();\n\n  // Set `rpx` unit converter\n  setRpx(1);\n}\n\nexport function afterRender() {\n  if (document.listener && document.listener.createFinish) {\n    document.listener.createFinish();\n  }\n\n  // Turn on batched updates\n  document.close();\n}\n"],"names":["exports","isUndef","type","isWeb","window","isNode","process","versions","node","isWeex","WXEnvironment","platform","isKraken","__kraken__","isMiniApp","my","alert","isByteDanceMicroApp","tt","showToast","isWeChatMiniProgram","wx","login","miniProgram","isQuickApp","global","callNative","isRpx","calcRpx","getRpx","setRpx","getViewportWidth","setViewportWidth","setDecimalPixelTransformer","setUnitPrecision","cached","setTargetPlatform","RPX_REG","__rpx_coefficient__","__viewport_width__","targetPlatform","_universalEnv","unitPrecision","toFixed","number","precision","multiplier","Math","pow","wholeNumber","floor","round","decimalPixelTransformer","rpx","$1","parseFloat","decimalVWTransformer","undefined","str","test","replace","viewport","transformer","n","fn","cache","Map","cachedFn","key","arguments","length","has","set","apply","get","convertUnit","value","prop","STYLE","ID","TEXT","CHILDREN","EVENT_PREFIX_REGEXP","ARIA_PREFIX_REGEXP","HYPHEN_REGEXP","EMPTY","updateWeexTextValue","children","map","child","nodeType","join","setAttr","nodeMaps","document","__weex_document__","getElementById","id","createBody","props","body","documentElement","appendChild","createComment","content","createEmpty","createText","text","updateText","parentNode","createElement","style","originStyle","eventName","slice","toLowerCase","addEventListener","setAttribute","parent","removeChild","attr","replaceChild","newChild","oldChild","previousSibling","nextSibling","insertAfter","insertBefore","after","before","eventHandler","params","addEvent","removeEventListener","removeEvent","removeAttribute","propKey","propValue","m","p","toUpperCase","setStyle","setStyles","beforeRender","open","afterRender","listener","createFinish","close"],"mappings":"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"}