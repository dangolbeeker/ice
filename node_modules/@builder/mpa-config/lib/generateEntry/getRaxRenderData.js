"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", { value: true });
var path = require("path");
exports.default = (function (api, renderData, _a) {
    var entryName = _a.entryName, pageConfig = _a.pageConfig;
    var _b = api.context.userConfig.web, webConfig = _b === void 0 ? {} : _b, getValue = api.getValue;
    var staticConfig = getValue('staticConfig');
    var tabBarPath = path.join(getValue('TEMP_PATH'), 'TabBar/index');
    var showTabBar = false;
    var tabBarConfig = staticConfig.tabBar;
    if (tabBarConfig) {
        if (tabBarConfig.custom) {
            tabBarPath = getValue('CUSTOM_TAB_BAR_PATH');
            showTabBar = tabBarConfig.list.indexOf(entryName) > -1;
        }
        else {
            showTabBar = tabBarConfig.items.some(function (item) { return item.pageName === entryName; });
        }
    }
    return __assign(__assign({}, renderData), { hydrate: Boolean(webConfig.hydrate || webConfig.ssr || webConfig.snapshot || webConfig.staticExport), tabBarPath: tabBarPath,
        showTabBar: showTabBar, tabBarConfig: JSON.stringify(tabBarConfig), pageConfig: JSON.stringify(pageConfig), entryName: entryName });
});
